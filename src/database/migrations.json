[{"sql":["-- Custom SQL migration file, put you code below! --\r\nCREATE EXTENSION IF NOT EXISTS vector;"],"bps":true,"folderMillis":1729509950412,"hash":"be8ced67caebe8b87851239d7d82dd28b2438d535bdafbb13eed57b169d70628"},{"sql":["CREATE TABLE IF NOT EXISTS \"vector_data_text_embedding_3_small\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"path\" text NOT NULL,\r\n\t\"mtime\" bigint NOT NULL,\r\n\t\"content\" text NOT NULL,\r\n\t\"embedding\" vector(1536),\r\n\t\"metadata\" jsonb NOT NULL\r\n);\r\n","\r\nCREATE TABLE IF NOT EXISTS \"vector_data_text_embedding_3_large\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"path\" text NOT NULL,\r\n\t\"mtime\" bigint NOT NULL,\r\n\t\"content\" text NOT NULL,\r\n\t\"embedding\" vector(3072),\r\n\t\"metadata\" jsonb NOT NULL\r\n);\r\n","\r\nCREATE INDEX IF NOT EXISTS \"embeddingIndex_text_embedding_3_small\" ON \"vector_data_text_embedding_3_small\" USING hnsw (\"embedding\" vector_cosine_ops);"],"bps":true,"folderMillis":1729509994653,"hash":"69890965c408aafd6583717f5d56dcd296da18def0b2e4173681c270940f0760"},{"sql":["CREATE TABLE IF NOT EXISTS \"vector_data_nomic_embed_text\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"path\" text NOT NULL,\r\n\t\"mtime\" bigint NOT NULL,\r\n\t\"content\" text NOT NULL,\r\n\t\"embedding\" vector(768),\r\n\t\"metadata\" jsonb NOT NULL\r\n);\r\n","\r\nCREATE INDEX IF NOT EXISTS \"embeddingIndex_nomic_embed_text\" ON \"vector_data_nomic_embed_text\" USING hnsw (\"embedding\" vector_cosine_ops);"],"bps":true,"folderMillis":1729890971064,"hash":"14d18dfce57c619ac3bbd9dce2d9084ec88ebf9e68da51224d304b555d259db1"},{"sql":["CREATE TABLE IF NOT EXISTS \"vector_data_mxbai_embed_large\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"path\" text NOT NULL,\r\n\t\"mtime\" bigint NOT NULL,\r\n\t\"content\" text NOT NULL,\r\n\t\"embedding\" vector(1024),\r\n\t\"metadata\" jsonb NOT NULL\r\n);\r\n","\r\nCREATE INDEX IF NOT EXISTS \"embeddingIndex_mxbai_embed_large\" ON \"vector_data_mxbai_embed_large\" USING hnsw (\"embedding\" vector_cosine_ops);"],"bps":true,"folderMillis":1729928816942,"hash":"60a8ed3c69f28f0a5fd3814fc54bef28abfaa802c5e126f98e0e3d93f590f50e"},{"sql":["CREATE TABLE IF NOT EXISTS \"vector_data_bge_m3\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"path\" text NOT NULL,\r\n\t\"mtime\" bigint NOT NULL,\r\n\t\"content\" text NOT NULL,\r\n\t\"embedding\" vector(1024),\r\n\t\"metadata\" jsonb NOT NULL\r\n);\r\n","\r\nCREATE INDEX IF NOT EXISTS \"embeddingIndex_bge_m3\" ON \"vector_data_bge_m3\" USING hnsw (\"embedding\" vector_cosine_ops);"],"bps":true,"folderMillis":1730085029605,"hash":"0076cf2323abaa864d4e8661d2205dff57caa6806761605453dbb1a14309257d"},{"sql":["CREATE TABLE IF NOT EXISTS \"template\" (\r\n\t\"id\" uuid PRIMARY KEY DEFAULT gen_random_uuid() NOT NULL,\r\n\t\"name\" text NOT NULL,\r\n\t\"content\" jsonb NOT NULL,\r\n\t\"created_at\" timestamp DEFAULT now() NOT NULL,\r\n\t\"updated_at\" timestamp DEFAULT now() NOT NULL,\r\n\tCONSTRAINT \"template_name_unique\" UNIQUE(\"name\")\r\n);\r\n"],"bps":true,"folderMillis":1730443763982,"hash":"7593a1fbe189ea9433bfd8f7332e0219c2583ae657a404f753d46d8799e8a29f"},{"sql":["ALTER TABLE \"vector_data_text_embedding_3_small\" RENAME TO \"vector_data_openai_text_embedding_3_small\";","\r\nALTER TABLE \"vector_data_text_embedding_3_large\" RENAME TO \"vector_data_openai_text_embedding_3_large\";","\r\nALTER TABLE \"vector_data_nomic_embed_text\" RENAME TO \"vector_data_ollama_nomic_embed_text\";","\r\nALTER TABLE \"vector_data_mxbai_embed_large\" RENAME TO \"vector_data_ollama_mxbai_embed_large\";","\r\nALTER TABLE \"vector_data_bge_m3\" RENAME TO \"vector_data_ollama_bge_m3\";","\r\nALTER INDEX IF EXISTS \"embeddingIndex_text_embedding_3_small\" RENAME TO \"embeddingIndex_openai_text_embedding_3_small\";","\r\nALTER INDEX IF EXISTS \"embeddingIndex_nomic_embed_text\" RENAME TO \"embeddingIndex_ollama_nomic_embed_text\";","\r\nALTER INDEX IF EXISTS \"embeddingIndex_mxbai_embed_large\" RENAME TO \"embeddingIndex_ollama_mxbai_embed_large\";","\r\nALTER INDEX IF EXISTS \"embeddingIndex_bge_m3\" RENAME TO \"embeddingIndex_ollama_bge_m3\";",""],"bps":true,"folderMillis":1732064682864,"hash":"d5913f65b6a856288de9191ab238c32af684f9e99f5873f3f7cede3bd8562dd2"},{"sql":["CREATE TABLE IF NOT EXISTS \"vector_data_gemini_text_embedding_004\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"path\" text NOT NULL,\r\n\t\"mtime\" bigint NOT NULL,\r\n\t\"content\" text NOT NULL,\r\n\t\"embedding\" vector(768),\r\n\t\"metadata\" jsonb NOT NULL\r\n);\r\n","\r\nCREATE INDEX IF NOT EXISTS \"embeddingIndex_gemini_text_embedding_004\" ON \"vector_data_gemini_text_embedding_004\" USING hnsw (\"embedding\" vector_cosine_ops);"],"bps":true,"folderMillis":1732189839252,"hash":"cd627227d5d1c65945d07f1459dda01b033baabfa141274b00393c93b13caa8d"},{"sql":["CREATE TABLE \"embeddings\" (\r\n\t\"id\" serial PRIMARY KEY NOT NULL,\r\n\t\"path\" text NOT NULL,\r\n\t\"mtime\" bigint NOT NULL,\r\n\t\"content\" text NOT NULL,\r\n\t\"model\" text NOT NULL,\r\n\t\"dimension\" smallint NOT NULL,\r\n\t\"embedding\" vector,\r\n\t\"metadata\" jsonb NOT NULL\r\n);\r\n","\r\n\r\nCREATE INDEX \"embeddings_path_index\" ON \"embeddings\" USING btree (\"path\");","\r\nCREATE INDEX \"embeddings_model_index\" ON \"embeddings\" USING btree (\"model\");","\r\nCREATE INDEX \"embeddings_dimension_index\" ON \"embeddings\" USING btree (\"dimension\");","\r\nCREATE INDEX \"embeddings_embedding_768_index\" ON \"embeddings\" USING hnsw ((embedding::vector(768)) vector_cosine_ops) WHERE dimension = 768;","\r\nCREATE INDEX \"embeddings_embedding_1024_index\" ON \"embeddings\" USING hnsw ((embedding::vector(1024)) vector_cosine_ops) WHERE dimension = 1024;","\r\nCREATE INDEX \"embeddings_embedding_1536_index\" ON \"embeddings\" USING hnsw ((embedding::vector(1536)) vector_cosine_ops) WHERE dimension = 1536;","\r\n\r\n-- Migrate data from openai-text-embedding-3-small\r\nINSERT INTO \"embeddings\" (\"path\", \"mtime\", \"content\", \"model\", \"dimension\", \"embedding\", \"metadata\")\r\nSELECT \"path\", \"mtime\", \"content\", 'openai/text-embedding-3-small', 1536, \"embedding\", \"metadata\"\r\nFROM \"vector_data_openai_text_embedding_3_small\";","\r\n\r\n-- Migrate data from openai-text-embedding-3-large\r\nINSERT INTO \"embeddings\" (\"path\", \"mtime\", \"content\", \"model\", \"dimension\", \"embedding\", \"metadata\")\r\nSELECT \"path\", \"mtime\", \"content\", 'openai/text-embedding-3-large', 3072, \"embedding\", \"metadata\"\r\nFROM \"vector_data_openai_text_embedding_3_large\";","\r\n\r\n-- Migrate data from gemini-text-embedding-004\r\nINSERT INTO \"embeddings\" (\"path\", \"mtime\", \"content\", \"model\", \"dimension\", \"embedding\", \"metadata\")\r\nSELECT \"path\", \"mtime\", \"content\", 'gemini/text-embedding-004', 768, \"embedding\", \"metadata\"\r\nFROM \"vector_data_gemini_text_embedding_004\";","\r\n\r\n-- Migrate data from nomic-embed-text\r\nINSERT INTO \"embeddings\" (\"path\", \"mtime\", \"content\", \"model\", \"dimension\", \"embedding\", \"metadata\")\r\nSELECT \"path\", \"mtime\", \"content\", 'ollama/nomic-embed-text', 768, \"embedding\", \"metadata\"\r\nFROM \"vector_data_ollama_nomic_embed_text\";","\r\n\r\n-- Migrate data from mxbai-embed-large\r\nINSERT INTO \"embeddings\" (\"path\", \"mtime\", \"content\", \"model\", \"dimension\", \"embedding\", \"metadata\")\r\nSELECT \"path\", \"mtime\", \"content\", 'ollama/mxbai-embed-large', 1024, \"embedding\", \"metadata\"\r\nFROM \"vector_data_ollama_mxbai_embed_large\";","\r\n\r\n-- Migrate data from bge-m3\r\nINSERT INTO \"embeddings\" (\"path\", \"mtime\", \"content\", \"model\", \"dimension\", \"embedding\", \"metadata\")\r\nSELECT \"path\", \"mtime\", \"content\", 'ollama/bge-m3', 1024, \"embedding\", \"metadata\"\r\nFROM \"vector_data_ollama_bge_m3\";","\r\n\r\nDROP TABLE \"vector_data_openai_text_embedding_3_small\" CASCADE;","\r\nDROP TABLE \"vector_data_openai_text_embedding_3_large\" CASCADE;","\r\nDROP TABLE \"vector_data_gemini_text_embedding_004\" CASCADE;","\r\nDROP TABLE \"vector_data_ollama_nomic_embed_text\" CASCADE;","\r\nDROP TABLE \"vector_data_ollama_mxbai_embed_large\" CASCADE;","\r\nDROP TABLE \"vector_data_ollama_bge_m3\" CASCADE;\r\n"],"bps":true,"folderMillis":1738138268694,"hash":"927206ab272d335039a38b25131d73286001209a718a9a1876f33453d97e1a6b"},{"sql":["CREATE INDEX \"embeddings_embedding_128_index\" ON \"embeddings\" USING hnsw ((embedding::vector(128)) vector_cosine_ops) WHERE dimension = 128;","\r\nCREATE INDEX \"embeddings_embedding_256_index\" ON \"embeddings\" USING hnsw ((embedding::vector(256)) vector_cosine_ops) WHERE dimension = 256;","\r\nCREATE INDEX \"embeddings_embedding_384_index\" ON \"embeddings\" USING hnsw ((embedding::vector(384)) vector_cosine_ops) WHERE dimension = 384;","\r\nCREATE INDEX \"embeddings_embedding_512_index\" ON \"embeddings\" USING hnsw ((embedding::vector(512)) vector_cosine_ops) WHERE dimension = 512;","\r\nCREATE INDEX \"embeddings_embedding_1280_index\" ON \"embeddings\" USING hnsw ((embedding::vector(1280)) vector_cosine_ops) WHERE dimension = 1280;","\r\nCREATE INDEX \"embeddings_embedding_1792_index\" ON \"embeddings\" USING hnsw ((embedding::vector(1792)) vector_cosine_ops) WHERE dimension = 1792; "],"bps":true,"folderMillis":1738720225813,"hash":"612925f950488c398cbe437f1d8d00f7d0ad8c771f714695915396f5ee93dd5e"},{"sql":["CREATE INDEX \"embeddings_embedding_3072_index\" ON \"embeddings\" USING hnsw ((embedding::halfvec(3072)) halfvec_cosine_ops) WHERE dimension = 3072;","\r\n"],"bps":true,"folderMillis":1765756800000,"hash":"46a0fea14f713741b7811335f1d2c1bd8f2b5a2404d724fa374db8f9b55f060e"}]